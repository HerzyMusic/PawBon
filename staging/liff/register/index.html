<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>PawBon â€” ãƒšãƒƒãƒˆç™»éŒ²</title>
<style>
:root{--rose:#E8475F;--teal:#2ECDA7;--teal-d:#1FA882;--teal-l:#EDFCF7;--amber:#FFB347;--amber-l:#FFF8EC;--orange:#FF7B54;--ink:#1A1A2E;--s500:#64748B;--s400:#94A3B8;--s200:#E2E8F0;--s100:#F1F5F9;--bg:#F8F6F3;--card:#FFF;}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{font-family:'Helvetica Neue','Noto Sans JP',sans-serif;background:var(--bg);color:var(--ink);min-height:100vh;}
.header{background:var(--card);padding:16px;border-bottom:1px solid var(--s200);text-align:center;}
.header h1{font-size:18px;font-weight:800;}
.header p{font-size:12px;color:var(--s400);margin-top:2px;}
.progress{display:flex;gap:4px;padding:0 16px;margin-top:12px;}
.progress .dot{flex:1;height:4px;border-radius:2px;background:var(--s200);}
.progress .dot.active{background:var(--teal);}
.section{padding:20px 16px;}
.form-label{font-size:12px;font-weight:700;color:var(--s500);margin-bottom:6px;display:block;}
.form-input,.form-select{width:100%;padding:12px 14px;border:1.5px solid var(--s200);border-radius:12px;font-size:14px;background:var(--card);appearance:none;font-family:inherit;margin-bottom:12px;}
.form-input:focus,.form-select:focus{outline:none;border-color:var(--teal);}
.choice-grid{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px;}
.choice-btn{padding:10px 16px;border-radius:12px;font-size:13px;font-weight:700;cursor:pointer;border:1.5px solid var(--s200);background:var(--card);transition:all .15s;}
.choice-btn.selected{border-color:var(--teal);background:var(--teal-l);color:var(--teal-d);}
.btn{display:block;width:100%;padding:14px;border-radius:14px;font-size:15px;font-weight:800;text-align:center;cursor:pointer;border:none;font-family:inherit;transition:all .15s;}
.btn:active{transform:scale(.97);}
.btn-primary{background:linear-gradient(135deg,var(--teal),var(--teal-d));color:#fff;box-shadow:0 4px 16px rgba(46,205,167,.25);}
.btn-outline{background:var(--card);color:var(--s500);border:1.5px solid var(--s200);margin-top:8px;}
.btn:disabled{opacity:.5;cursor:not-allowed;}
.info{padding:12px;border-radius:12px;font-size:12px;text-align:center;background:var(--amber-l);color:var(--orange);margin-top:12px;}
.card{background:var(--card);border-radius:16px;padding:16px;margin-bottom:12px;border:1.5px solid var(--s200);}
.data-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--s100);font-size:13px;}
.data-row:last-child{border:none;}
.data-row .label{color:var(--s500);}
.data-row .value{font-weight:700;text-align:right;max-width:60%;}
.done{text-align:center;padding:40px 16px;}
.done .icon{font-size:64px;}
.done h2{font-size:20px;font-weight:900;margin-top:12px;}
.done p{font-size:13px;color:var(--s500);margin-top:6px;line-height:1.6;}
.code-box{background:linear-gradient(135deg,#FFF0F2,#FFF4F0);border:1.5px dashed var(--rose);border-radius:16px;padding:20px;text-align:center;margin:16px 0;}
.code-box .code{font-family:monospace;font-size:28px;font-weight:700;color:var(--rose);letter-spacing:6px;}
.code-box .hint{font-size:11px;color:var(--s400);margin-top:4px;}
.hint-text{font-size:10px;color:var(--s400);margin-top:-8px;margin-bottom:12px;}
.loading{display:none;text-align:center;padding:40px;font-size:14px;color:var(--s500);}
.loading.show{display:block;}
.footer{text-align:center;padding:24px;font-size:10px;color:var(--s400);}
.pet-entry{background:var(--card);border:1.5px solid var(--s200);border-radius:14px;padding:14px;margin-bottom:12px;}
.pet-entry-header{font-size:13px;font-weight:800;color:var(--teal-d);margin-bottom:10px;display:flex;align-items:center;gap:6px;}
.pet-entry .form-input,.pet-entry .form-select{margin-bottom:8px;}
</style>
</head>
<body>

<!-- ===== Step 1: ã‚ªãƒ¼ãƒŠãƒ¼ï¼†ãƒšãƒƒãƒˆæƒ…å ± ===== -->
<div id="step1">
  <div class="header">
    <h1>ğŸ“ ãƒšãƒƒãƒˆç™»éŒ²</h1>
    <p>ã‚¹ãƒ†ãƒƒãƒ— 1/3</p>
  </div>
  <div class="progress"><div class="dot active"></div><div class="dot"></div><div class="dot"></div></div>
  <div class="section">
    <label class="form-label">ğŸ‘¤ ã‚ãªãŸã®ãŠåå‰</label>
    <input class="form-input" id="ownerName" placeholder="ä¾‹ï¼šç”°ä¸­å¤ªéƒ">
    <div class="hint-text">ğŸ’¡ å®¶æ—ã«è¡¨ç¤ºã•ã‚Œã‚‹åå‰ã§ã™</div>

    <label class="form-label">ğŸ”¢ ä½•åŒ¹é£¼ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</label>
    <div class="choice-grid" id="countGrid">
      <div class="choice-btn selected" onclick="selectCount(this,1)">1åŒ¹</div>
      <div class="choice-btn" onclick="selectCount(this,2)">2åŒ¹</div>
      <div class="choice-btn" onclick="selectCount(this,3)">3åŒ¹</div>
      <div class="choice-btn" onclick="selectCount(this,4)">4åŒ¹+</div>
    </div>

    <div id="petEntriesContainer"></div>

    <button class="btn btn-primary" onclick="goStep2()">æ¬¡ã¸ â†’</button>
  </div>
</div>

<!-- ===== Step 2: åœ°åŸŸé¸æŠ ===== -->
<div id="step2" style="display:none;">
  <div class="header">
    <h1>ğŸ“ åœ°åŸŸè¨­å®š</h1>
    <p>ã‚¹ãƒ†ãƒƒãƒ— 2/3</p>
  </div>
  <div class="progress"><div class="dot active"></div><div class="dot active"></div><div class="dot"></div></div>
  <div class="section">
    <label class="form-label">ğŸ“ éƒ½é“åºœçœŒ</label>
    <select class="form-select" id="area" onchange="onAreaChange()">
      <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
      <option>åŒ—æµ·é“</option><option>æ±äº¬éƒ½</option><option>ç¥å¥ˆå·çœŒ</option>
      <option>å¤§é˜ªåºœ</option><option>æ„›çŸ¥çœŒ</option><option>ç¦å²¡çœŒ</option>
      <option>ãã®ä»–</option>
    </select>

    <div id="detailGroup" style="display:none;">
      <label class="form-label">ğŸ  å¸‚åŒºç”ºæ‘</label>
      <select class="form-select" id="areaDetail">
        <option value="">é¸æŠ</option>
      </select>
    </div>

    <div style="margin-top:8px;padding-top:16px;border-top:1px solid var(--s200);">
      <label class="form-label">ğŸ ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ï¼ˆä»»æ„ï¼‰</label>
      <input class="form-input" id="referralInput" placeholder="ä¾‹ï¼šR-A3K7M2" style="text-transform:uppercase;letter-spacing:2px;font-family:monospace;font-size:16px;">
      <div class="hint-text">ğŸ’¡ å‹ã ã¡ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’ã‚‚ã‚‰ã£ãŸæ–¹ã¯ã“ã“ã«å…¥åŠ›ã—ã¦ãã ã•ã„</div>
    </div>

    <button class="btn btn-primary" onclick="goStep3()">æ¬¡ã¸ â†’</button>
    <button class="btn btn-outline" onclick="show('step1');hide('step2')">â† æˆ»ã‚‹</button>
  </div>
</div>

<!-- ===== Step 3: ç¢ºèª ===== -->
<div id="step3" style="display:none;">
  <div class="header">
    <h1>âœ… ç¢ºèª</h1>
    <p>ã‚¹ãƒ†ãƒƒãƒ— 3/3</p>
  </div>
  <div class="progress"><div class="dot active"></div><div class="dot active"></div><div class="dot active"></div></div>
  <div class="section">
    <div class="card" id="confirmCard"></div>
    <button class="btn btn-primary" onclick="submitRegister()">âœ… ã“ã®å†…å®¹ã§ç™»éŒ²ã™ã‚‹</button>
    <button class="btn btn-outline" onclick="show('step1');hide('step3')">âœï¸ ä¿®æ­£ã™ã‚‹</button>
  </div>
</div>

<!-- ===== Loading ===== -->
<div id="loading" class="loading">
  <div style="font-size:40px;margin-bottom:12px;">â³</div>
  <div>ç™»éŒ²ä¸­...</div>
</div>

<!-- ===== Step 4: å®Œäº† ===== -->
<div id="step4" style="display:none;">
  <div class="done">
    <div class="icon">ğŸ‰</div>
    <h2>ç™»éŒ²å®Œäº†ï¼</h2>
    <p id="doneMsg"></p>
  </div>
  <div class="section" style="padding-top:0;">
    <div class="code-box">
      <div style="font-size:11px;color:var(--rose);font-weight:700;">ã‚ãªãŸã®å®¶æ—ã‚³ãƒ¼ãƒ‰</div>
      <div class="code" id="familyCodeDisplay"></div>
      <div class="hint">ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’å®¶æ—ã«ã‚·ã‚§ã‚¢ã—ã¦ãã ã•ã„</div>
    </div>
    <div class="info">ğŸ’¡ å®¶æ—ãŒã“ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨<br>æ¯æ—¥ã®å…ƒæ°—é€šçŸ¥ãŒå±Šãã¾ã™ï¼</div>
    <div id="referralCodeArea" style="display:none;margin-top:12px;">
      <div style="background:var(--teal-l);border:1.5px dashed var(--teal);border-radius:16px;padding:16px;text-align:center;">
        <div style="font-size:11px;color:var(--teal-d);font-weight:700;">ğŸ ã‚ãªãŸã®ç´¹ä»‹ã‚³ãƒ¼ãƒ‰</div>
        <div id="referralCodeDisplay" style="font-family:monospace;font-size:22px;font-weight:700;color:var(--teal-d);letter-spacing:4px;margin:6px 0;"></div>
        <div style="font-size:10px;color:var(--s400);">å‹ã ã¡ã«å…±æœ‰ã™ã‚‹ã¨å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼æ ãŒ+1ï¼</div>
      </div>
    </div>
    <button class="btn btn-primary" style="margin-top:16px;" onclick="closeLiff()">ğŸ¾ ã•ã£ãããƒã‚§ãƒƒã‚¯ï¼</button>
  </div>
</div>

<div class="footer">PawBon å…ƒæ°—ãƒã‚§ãƒƒã‚¯ v0.4.5 Beta<br>Â© 2026 PawBon Inc.</div>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script src="../config.js?v=2"></script>
<script>
var API_BASE = PAWBON_CONFIG.API_BASE;
var petCount = 1;
var lineId = '';

var breedOptions = {
  dog: ['æŸ´çŠ¬','ãƒˆã‚¤ãƒ—ãƒ¼ãƒ‰ãƒ«','ãƒãƒ¯ãƒ¯','ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ¬ãƒˆãƒªãƒãƒ¼','ãƒ•ãƒ¬ãƒ³ãƒãƒ–ãƒ«ãƒ‰ãƒƒã‚°','ãƒŸãƒ‹ãƒãƒ¥ã‚¢ãƒ€ãƒƒã‚¯ã‚¹','ãƒãƒ¡ãƒ©ãƒ‹ã‚¢ãƒ³','ã‚³ãƒ¼ã‚®ãƒ¼','MIX','ãã®ä»–'],
  cat: ['ã‚¹ã‚³ãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰','ãƒãƒ³ãƒã‚«ãƒ³','ã‚¢ãƒ¡ãƒªã‚«ãƒ³ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢','ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«','MIX','ãã®ä»–'],
  other: ['ã†ã•ã','ãƒãƒ ã‚¹ã‚¿ãƒ¼','ãƒ•ã‚§ãƒ¬ãƒƒãƒˆ','é³¥','ãã®ä»–']
};

var areas = {
  'åŒ—æµ·é“':['æœ­å¹Œå¸‚','æ—­å·å¸‚','å‡½é¤¨å¸‚','ãã®ä»–'],
  'æ±äº¬éƒ½':['ä¸–ç”°è°·åŒº','æ¸‹è°·åŒº','ç›®é»’åŒº','æ¸¯åŒº','æ–°å®¿åŒº','å“å·åŒº','æ‰ä¸¦åŒº','ç·´é¦¬åŒº','ãã®ä»–'],
  'ç¥å¥ˆå·çœŒ':['æ¨ªæµœå¸‚','å·å´å¸‚','è—¤æ²¢å¸‚','éŒå€‰å¸‚','ãã®ä»–'],
  'å¤§é˜ªåºœ':['å¤§é˜ªå¸‚','å ºå¸‚','è±Šä¸­å¸‚','ãã®ä»–'],
  'æ„›çŸ¥çœŒ':['åå¤å±‹å¸‚','è±Šç”°å¸‚','ãã®ä»–'],
  'ç¦å²¡çœŒ':['ç¦å²¡å¸‚','åŒ—ä¹å·å¸‚','ãã®ä»–']
};

// â•â•â• LIFF â•â•â•
async function initLiff() {
  try {
    await liff.init({ liffId: PAWBON_CONFIG.LIFF_ID.register });
    if (!liff.isLoggedIn()) { liff.login(); return; }
    var profile = await liff.getProfile();
    lineId = profile.userId;
  } catch (e) {
    lineId = 'debug_user_' + Date.now();
  }
}
initLiff();

// â•â•â• UI â•â•â•
function show(id) { document.getElementById(id).style.display = 'block'; }
function hide(id) { document.getElementById(id).style.display = 'none'; }

// â•â•â• æ•°é‡é¸æŠ â†’ ãƒšãƒƒãƒˆå…¥åŠ›æ¬„ç”Ÿæˆ â•â•â•
function selectCount(el, n) {
  document.querySelectorAll('#countGrid .choice-btn').forEach(function(b){ b.classList.remove('selected'); });
  el.classList.add('selected');
  petCount = n;
  renderPetEntries();
}

function renderPetEntries() {
  var container = document.getElementById('petEntriesContainer');
  // æ—¢å­˜å…¥åŠ›ã‚’ä¿å­˜
  var saved = [];
  for (var k = 0; k < 10; k++) {
    var nameEl = document.getElementById('petName_' + k);
    if (!nameEl) break;
    var breedEl = document.getElementById('breed_' + k);
    saved.push({ name: nameEl.value, breed: breedEl ? breedEl.value : '' });
  }

  var html = '';
  for (var i = 0; i < petCount; i++) {
    var prevName = saved[i] ? saved[i].name : '';
    html += '<div class="pet-entry">';
    html += '<div class="pet-entry-header">ğŸ¾ ãƒšãƒƒãƒˆ ' + (i + 1) + '</div>';
    html += '<label class="form-label">ãŠåå‰</label>';
    html += '<input class="form-input" id="petName_' + i + '" placeholder="ä¾‹ï¼šãƒãƒ§ã‚³" value="' + escapeAttr(prevName) + '">';
    html += '<label class="form-label">ç¨®é¡</label>';
    html += '<div class="choice-grid" id="speciesGrid_' + i + '">';
    html += '<div class="choice-btn" onclick="selectSpecies(' + i + ',this,\'dog\')">ğŸ• çŠ¬</div>';
    html += '<div class="choice-btn" onclick="selectSpecies(' + i + ',this,\'cat\')">ğŸˆ çŒ«</div>';
    html += '<div class="choice-btn" onclick="selectSpecies(' + i + ',this,\'other\')">ğŸ¾ ãã®ä»–</div>';
    html += '</div>';
    html += '<div id="breedGroup_' + i + '" style="display:none;">';
    html += '<label class="form-label">å“ç¨®</label>';
    html += '<select class="form-select" id="breed_' + i + '"><option value="">é¸æŠã—ã¦ãã ã•ã„</option></select>';
    html += '</div>';
    html += '</div>';
  }
  container.innerHTML = html;

  // å¾©å…ƒï¼šæ—¢å­˜å“ç¨®ãŒã‚ã‚Œã°ç¨®é¡ã‚‚å¾©å…ƒ
  for (var j = 0; j < petCount; j++) {
    if (saved[j] && saved[j].breed) {
      var sp = guessSpecies(saved[j].breed);
      if (sp) {
        highlightSpeciesBtn(j, sp);
        populateBreedSelect(j, sp, saved[j].breed);
      }
    }
  }
}

function selectSpecies(idx, el, type) {
  document.querySelectorAll('#speciesGrid_' + idx + ' .choice-btn').forEach(function(b){ b.classList.remove('selected'); });
  el.classList.add('selected');
  populateBreedSelect(idx, type, '');
}

function highlightSpeciesBtn(idx, type) {
  var map = { dog: 'çŠ¬', cat: 'çŒ«', other: 'ãã®ä»–' };
  document.querySelectorAll('#speciesGrid_' + idx + ' .choice-btn').forEach(function(b) {
    if (b.textContent.indexOf(map[type]) !== -1) b.classList.add('selected');
  });
}

function populateBreedSelect(idx, type, current) {
  var sel = document.getElementById('breed_' + idx);
  sel.innerHTML = '<option value="">é¸æŠã—ã¦ãã ã•ã„</option>';
  (breedOptions[type] || []).forEach(function(o) {
    sel.innerHTML += '<option' + (o === current ? ' selected' : '') + '>' + o + '</option>';
  });
  document.getElementById('breedGroup_' + idx).style.display = 'block';
}

function guessSpecies(breed) {
  if (breedOptions.dog.indexOf(breed) !== -1) return 'dog';
  if (breedOptions.cat.indexOf(breed) !== -1) return 'cat';
  if (breedOptions.other.indexOf(breed) !== -1) return 'other';
  return '';
}

// â•â•â• åœ°åŸŸé€£å‹• â•â•â•
function onAreaChange() {
  var area = document.getElementById('area').value;
  var sel = document.getElementById('areaDetail');
  var group = document.getElementById('detailGroup');
  if (!area || !areas[area]) { group.style.display = 'none'; return; }
  sel.innerHTML = '<option value="">é¸æŠ</option>';
  areas[area].forEach(function(a) { sel.innerHTML += '<option>' + a + '</option>'; });
  group.style.display = 'block';
}

// â•â•â• ãƒšãƒƒãƒˆæƒ…å ±åé›† â•â•â•
function collectPetData() {
  var names = [];
  var breeds = [];
  for (var i = 0; i < petCount; i++) {
    var name = document.getElementById('petName_' + i).value.trim();
    if (!name) return { error: 'ãƒšãƒƒãƒˆ ' + (i + 1) + ' ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„' };
    names.push(name);
    var breedEl = document.getElementById('breed_' + i);
    breeds.push(breedEl ? breedEl.value || '' : '');
  }
  return { names: names, breeds: breeds };
}

// â•â•â• ã‚¹ãƒ†ãƒƒãƒ—é·ç§» â•â•â•
function goStep2() {
  var ownerName = document.getElementById('ownerName').value.trim();
  if (!ownerName) { alert('ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  var petData = collectPetData();
  if (petData.error) { alert(petData.error); return; }
  hide('step1'); show('step2');
}

function goStep3() {
  var area = document.getElementById('area').value;
  if (!area) { alert('åœ°åŸŸã‚’é¸æŠã—ã¦ãã ã•ã„'); return; }

  var ownerName = document.getElementById('ownerName').value.trim();
  var petData = collectPetData();
  var detail = document.getElementById('areaDetail').value || '';
  var refEl = document.getElementById('referralInput');
  var referralCode = refEl ? (refEl.value || '').trim().toUpperCase() : '';

  // ç¢ºèªç”»é¢
  var petListHtml = '';
  for (var i = 0; i < petData.names.length; i++) {
    var breedStr = petData.breeds[i] || 'æœªé¸æŠ';
    petListHtml += '<div class="data-row"><span class="label">ğŸ¾ ãƒšãƒƒãƒˆ ' + (i + 1) + '</span><span class="value">' + escapeHtml(petData.names[i]) + 'ï¼ˆ' + escapeHtml(breedStr) + 'ï¼‰</span></div>';
  }

  document.getElementById('confirmCard').innerHTML =
    '<div class="data-row"><span class="label">ğŸ‘¤ ãŠåå‰</span><span class="value">' + escapeHtml(ownerName) + '</span></div>' +
    '<div class="data-row"><span class="label">ğŸ”¢ é ­æ•°</span><span class="value">' + petCount + 'åŒ¹</span></div>' +
    petListHtml +
    '<div class="data-row"><span class="label">ğŸ“ åœ°åŸŸ</span><span class="value">' + escapeHtml(area + ' ' + detail) + '</span></div>' +
    (referralCode ? '<div class="data-row"><span class="label">ğŸ ç´¹ä»‹ã‚³ãƒ¼ãƒ‰</span><span class="value" style="color:var(--teal-d);">' + escapeHtml(referralCode) + '</span></div>' : '');

  hide('step2'); show('step3');
}

// â•â•â• ç™»éŒ²é€ä¿¡ â•â•â•
async function submitRegister() {
  hide('step3');
  document.getElementById('loading').classList.add('show');

  var petData = collectPetData();
  var refEl = document.getElementById('referralInput');
  var referralCode = refEl ? (refEl.value || '').trim().toUpperCase() : '';
  var payload = {
    action: 'register',
    lineId: lineId,
    ownerName: document.getElementById('ownerName').value.trim(),
    petNames: petData.names.join(', '),
    breeds: petData.breeds.join(', '),
    petCount: petCount,
    area: document.getElementById('area').value,
    areaDetail: document.getElementById('areaDetail').value || '',
    referralCode: referralCode || ''
  };

  try {
    var res = await fetch(API_BASE + '/api-register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
    var result = await res.json();

    document.getElementById('loading').classList.remove('show');

    if (result.success) {
      var d = result.data || {};
      document.getElementById('familyCodeDisplay').textContent = d.familyCode;
      document.getElementById('doneMsg').textContent = petData.names.join('ã€') + 'ã®æƒ…å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸ';
      // ç´¹ä»‹ã‚³ãƒ¼ãƒ‰è¡¨ç¤º
      var refCode = d.referralCode || '';
      if (refCode) {
        document.getElementById('referralCodeArea').style.display = 'block';
        document.getElementById('referralCodeDisplay').textContent = refCode;
      }
      show('step4');
    } else {
      var err = result.error || {};
      alert('ç™»éŒ²ã‚¨ãƒ©ãƒ¼: ' + (err.message || 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼'));
      show('step3');
    }
  } catch (e) {
    document.getElementById('loading').classList.remove('show');
    alert('ã‚¨ãƒ©ãƒ¼: ' + e.message);
    show('step3');
  }
}

function closeLiff() {
  if (liff.isInClient()) { liff.closeWindow(); }
  else { window.close(); }
}

// â•â•â• Util â•â•â•
function escapeAttr(s) {
  return s.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}
function escapeHtml(s) {
  var d = document.createElement('div');
  d.textContent = s;
  return d.innerHTML;
}

// åˆæœŸè¡¨ç¤ºï¼š1åŒ¹åˆ†ã®å…¥åŠ›æ¬„ã‚’ç”Ÿæˆ
renderPetEntries();
</script>
</body>
</html>
